---
title: Helper functions
format:
  html:
    toc: true
    number-sections: true
engine: julia
execute:
  freeze: auto
  cache: true
---

```{julia}
#| echo: false
#| output: false
using UFFFiles
```

`UFFFiles.jl` provides several helper functions to facilitate interaction with UFF datasets.

## Dataset Type

::: {.api}
```{julia}
#| echo: false
@doc dataset_type
```
:::

```julia
using UFFFiles

# Only one dataset is read
data = readuff("path/to/your/file.uff")[1]
dtype = dataset_type(data)

# Several datasets are read
data_all = readuff("path/to/your/file.uff")
dtypes = dataset_type.(data_all)
```

## Supported Datasets

::: {.api}
```{julia}
#| echo: false
@doc supported_datasets
```
:::

```julia
using UFFFiles

valid_datasets = supported_datasets()
```

## Supported file extensions

::: {.api}
```{julia}
#| echo: false
@doc supported_file_extensions
```
:::

```julia
using UFFFiles

valid_file_extensions = supported_file_extensions()
```

## SRDC Documentation

This function provides an easy access to the documentation for Universal File datasets that were originally developed by the Structural Dynamics Research Corporation (SDRC) in the late 1960s and early 1970s.

::: {.api}
```{julia}
#| echo: false
@doc srdc_doc
```
:::

```julia
using UFFFiles

# Get the documentation for Dataset 15
srdc_doc(Dataser15())
```

## Connectivity Matrix

::: {.api}
```{julia}
#| echo: false
@doc connectivity_matrix
```
:::

```julia
using UFFFiles

# readuff returns a vector of datasets
data2412 = readuff("path/to/your/file2412.uff")[1]
connectivity = connectivity_matrix(data2412)
```

## Convert to SI units

::: {.api}
```{julia}
# | echo: false
@doc convert_to_si!
```
:::

```julia
using UFFFiles

# readuff returns a vector of datasets
datasets = readuff("path/to/your/file.uff")

# Convert all datasets to SI units - This assumes that a Dataset164 is present in the file. Otherwise, default SI conversion factors will be used.
convert_to_si!(datasets)

# Convert all datasets to SI units using a specific Dataset164 - Useful when no Dataset164 is present in the file
ds164 = Dataset164(9, "User Defined", 2, 0.3048, 4.44822, 1., 273.15)  # Example conversion factors
convert_to_si!(datasets, ds164)

# Convert all datasets to SI units using broadcasting - Useful to convert only a subset of datasets
convert_to_si!.(datasets, Ref(ds164))
```

## Dataset 55 to matrix

::: {.api}
```{julia}
# | echo: false
@doc dataset55_to_mat
```
:::

```julia
using UFFFiles

# Let's assume you have read a UFF file containing dataset 55 only
data55 = readuff("path/to/your/file55.uff")

# Convert dataset 55 to a matrix
matrix55, x = dataset55_to_mat(data55)
```

## Dataset 58 to matrix

::: {.api}
```{julia}
# | echo: false
@doc dataset58_to_mat
```
:::

```julia
using UFFFiles

# Let's assume you have read a UFF file containing dataset 58 only
data58 = readuff("path/to/your/file58.uff")

# Convert dataset 58 to a matrix
matrix58, x = dataset58_to_matrix(data58)
```